# Screen, wallpaper {{{
  # Screens
  set-monitor 2> /dev/null || {
    # Fallback, in case there is a problem with the script
    s1=$(xrandr | grep -P ' connected .*primary.*' | awk '{print $1}');
    s2=$(xrandr | grep -P ' connected (?!.*primary.*)' | awk '{print $1}');
    s1_opts="--mode 1920x1080 --pos 0x0 --rotate normal";
    s2_opts="--off";
    
    [ "$secondary" == "" ] && s2_opts="--mode 1920x1080 --pos 1920x0 --rotate normal";

    xrandr --output $s1 --primary $s1_opts \
           --output $s2 $s2_opts;
  }

  # Compositor
  picom &

  # Wallpaper
  config="${XDG_CONFIG_HOME:-$HOME/.config}"
  feh --no-fehbg --bg-scale "$config/wallpaper/wallpaper"
# }}}


# Input {{{
  # Keyboard layout
  setxkbmap es
  # To alternate between spanish (es) and english (us) layout by pressing
  # <Meta>(Win) and <Space> simultaneously
  # setxkbmap -layout es,us -option grp:win_space_toggle

  # Mouse configuration
  if [ "$(xinput --list | grep 'Logitech' | wc -l)" == "1" ]
  then
    xinput --set-prop \
           'Logitech Wireless Mouse' \
           'Coordinate Transformation Matrix' \
           0.43 0 0 0 0.43 0 0 0 1
  fi

  # Touchpad configuration
  if [ "$(xinput --list | grep 'Touchpad' | wc -l)" == "1" ]
  then
    xinput --set-prop \
           'PNP0C50:0e 06CB:7E7E Touchpad' \
           'libinput Tapping Enabled' 1
    xinput --set-prop \
           'PNP0C50:0e 06CB:7E7E Touchpad' \
           'libinput Natural Scrolling Enabled' 1
    xinput --set-prop \
           'PNP0C50:0e 06CB:7E7E Touchpad' \
           'Coordinate Transformation Matrix'\
           0.75 0 0 0 0.75 0 0 0 1
  fi
# }}}


# System tray widgets {{{
  # Disk mounter (do not automount)
  udiskie -t -A &

  # Battery icon
  # cbatticon -r 20 -l 30 &

  # Network
  # nm-applet &

  # Volume
  # volumeicon &
# }}}


# Programs {{{
  # Uptime session
  echo $(date +"%s") > /tmp/start_session.tmp

  # Safe Eyes
  $HOME/.local/libexec/safeeyes.sh &

  # Break
  $HOME/.local/libexec/break.sh &

  # Activity
  # $HOME/.local/libexec/activity.py /dev/null &
  $HOME/.local/libexec/activity.py &
# }}}
